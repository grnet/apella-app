{{#gen-page classNames=(if gen.nested 'nested' '') as |page|}}
  {{page.toolbar
    pageTitle=(t gen.page.title model)
    breadcrumbs=gen.breadcrumbs
    toolbarActions=gen.toolbarActions
    model=model
    tabs=gen.tabs
  }}

  {{#if userNotFound }}
  {{toolbar-message warn=true message='user.not.found.error' button=(hash action='shibbolethRegister' message='register' icon='pregnant_woman')}}
  {{/if}}
  {{#if userExists }}
  {{toolbar-message warn=true message='user.exists.error' button=(hash action='shibbolethLogin' message='login.domestic.label' icon='pregnant_woman')}}
  {{/if}}
  {{#if userNotEmailVerified }}
  {{toolbar-message warn=true message='user.not.email_verified.error' buttonComponent=(component 'resend-verification-action')}}
  {{/if}}
  {{#if userNotVerified }}
  {{toolbar-message warn=true message='user.not.verified.error'}}
  {{/if}}
  {{#if userEmailVerificationFailed }}
  {{toolbar-message warn=true message='user.email_verification.error.message'}}
  {{/if}}
  {{#if userNotActive }}
  {{toolbar-message warn=true message='user.not.active.error'}}
  {{/if}}
  {{#if resetToken}}
    {{reset-password token=resetToken visiblePopup=true }}
  {{/if}}


  {{#page.content}}
    {{#if gen.partials.top}}
      {{ partial gen.partials.top }}
    {{/if}}

    <md-content class="flex layout-row md-padding">
      <md-card class="flex-50">
        <md-card-title>
          <md-card-title-text>
            <span class="md-title">{{t 'login.username.title'}}</span>
            <p class="md-subhead">{{t 'login.login.description' }}</p>
          </md-card-title-text>
        </md-card-title>
        <md-card-content>
          {{ component gen.component
            model

            fieldsetFieldsComponent='paper-content'
            flat=true

            modelMeta=(readonly gen.resource)
            validators=(readonly gen.resource.validators)
            messages=(readonly gen.messages)
            labels=(readonly gen.labels)
            beforeFormComponent=(readonly gen.components.beforeForm)
            _controller=this
            extraActions=(readonly gen.extraActions)

            onInvalid=(route-action 'onFormInvalid')
            onSubmit=(route-action 'onFormSubmit')
          }}
        </md-card-content>
      </md-card>
      <md-card class="flex-50">
        <md-card-title>
          <md-card-title-text>
            <span class="md-title">{{t 'login.domestic.title'}}</span>
            <p class="md-subhead">{{t 'login.domestic.description' }}</p>
          </md-card-title-text>
        </md-card-title>
        <md-card-content>
          {{#paper-button
            class="no-margin"
            onClick=(route-action 'shibbolethLogin')
            raised=true primary=true}}{{paper-icon 'pregnant_woman'}}{{t 'login.domestic.label' }}{{/paper-button}}
        </md-card-content>
      </md-card>
    </md-content>
    <md-content class="flex layout-row md-padding">
    </md-content>
    {{#if gen.partials.bottom}}
      {{ partial gen.partials.bottom }}
    {{/if}}
  {{/page.content}}

{{/gen-page}}
